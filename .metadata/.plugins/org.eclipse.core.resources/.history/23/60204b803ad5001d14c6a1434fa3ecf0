#pragma once

#include <vector>
#include "stm32h7xx_hal.h"

using namespace std;

enum BaseState{
	OPEN,
	CLOSED
};

class Base{
private:
	BaseState state = CLOSED;
	GPIO_TypeDef* port;
	uint16_t pin;

public:
	static vector<Base*> all_bases;

	Base(GPIO_TypeDef* port, uint16_t pin) : port(port), pin(pin) {
		Base::all_bases.push_back(this);
	}

	void open(){
		HAL_GPIO_WritePin(port, pin, GPIO_PIN_SET);
	}

	void close(){
		HAL_GPIO_WritePin(port, pin, GPIO_PIN_RESET);
	}

};
